<template name="selfInfo">
    <view class="weui-panel weui-panel_access">
        <view class="weui-panel__hd"><i class="czs-location-l bold" /> 我的位置 </view>
        <view class="weui-panel__bd">
            <view class="weui-media-box weui-flex">
                <view class="weui-flex__item my-name">{{user_name}}</view>
                <view class="my-jf">积分：{{score}}</view>
                <view class="my-rank"><span class="gr-b">{{rank}}</span>名</view>
            </view>
        </view>
    </view>
</template>

<template name="rankList">
    <view class="weui-cells__title">
        <view class="weui-flex">
            <view class="mc">
                <view>名次</view>
            </view>
            <view class="weui-flex__item">
                <view>用户</view>
            </view>
            <view class="cj">
                <view>成绩</view>
            </view>
        </view>
    </view>
    <view class="weui-cells weui-cells_after-title">
        <view class="weui-cell" wx:for="{{scoreRank}}" wx:key="{{user_id}}">
            <view class="mc">
                <view>{{item.rank}}</view>
            </view>
            <view class="weui-flex__item">
                <view>{{item.user_name}}</view>
            </view>
            <view class="cj">
                <view>{{item.score}}</view>
            </view>
        </view>
    </view>
</template>

<!--ranking.wxml-->
<view class="page">
    <view class="page__bd">
        <view class="weui-panel">
            <view class="weui-panel__hd hd-picker">
                <picker value="{{current}}" range="{{phblist}}" bindchange="bindPhbChange">
                    <view class="picker-title">
                        <i class="czs-category-l pt-u gr bold" />
                        <span class="pt-u">{{phblist[current]}}</span>
                        <i class="czs-angle-down-l pt-u" />
                    </view>
                </picker>
            </view>
        </view>
        <block wx:if="{{view == '0'}}">
            <template is="selfInfo" data="{{...userScoreRank}}" />
            <template is="rankList" data="{{scoreRank}}" />
        </block>

        <block wx:elif="{{view == '11'}}">
            <view class="weui-cells__title">选择需查看的群组</view>
            <view class="weui-panel weui-panel_access">
                <view class="weui-panel__bd">
                    <view wx:for="{{phbSubList}}" wx:key="{{ID_}}" class="weui-media-box weui-media-box_text" bindtap="bindUserGroup" data-gid="{{item.ID_}}">
                        <view class="weui-media-box__title weui-media-box__title_in-text">{{item.GROUP_NAME}}</view>
                        <view class="weui-media-box__desc">{{item.MS}}</view>
                    </view>
                </view>
            </view>
        </block>
        <block wx:elif="{{view == '12'}}">
            <template is="selfInfo" data="{{...userScoreRank}}" />
            <template is="rankList" data="{{scoreRank}}" />
        </block>

        <block wx:elif="{{view == '21'}}">
            <view class="weui-cells__title">选择需查看的考试记录</view>
            <view class="weui-panel weui-panel_access">
                <view class="weui-panel__bd">
                    <view wx:for="{{phbSubList}}" wx:key="{{id_}}" class="weui-media-box weui-media-box_text" bindtap="bindUserExam" data-eid="{{item.id_}}">
                        <view class="weui-media-box__title weui-media-box__title_in-text no-ws">{{item.TITLE}}</view>
                        <view class="weui-media-box__desc">开始时间：{{item.START_TIME}}</view>
                        <view class="weui-media-box__desc">结束时间：{{item.END_TIME}}</view>
                    </view>
                </view>
            </view>
        </block>
        <block wx:elif="{{view == '22'}}">
            <view class="weui-panel weui-panel_access">
                <view class="weui-panel__hd"><i class="czs-location-l bold" /> 我的位置 </view>
                <view class="weui-panel__bd">
                    <view class="weui-media-box weui-flex">
                        <view class="weui-flex__item my-name">{{userExamRank.user_name}}</view>
                        <view class = "my-time">用时：{{userExamRank.time}}秒</view>
                        <view class="my-jf">分数：{{userExamRank.score}}</view>
                        <view class="my-rank"><span class="gr-b">{{userExamRank.rank}}</span>名</view>
                    </view>
                </view>
            </view>
            <view class="weui-cells__title">
                <view class="weui-flex">
                    <view class="mc">
                        <view>名次</view>
                    </view>
                    <view class="weui-flex__item">
                        <view>用户</view>
                    </view>
                    <view class="time">
                        <view>用时</view>
                    </view>
                    <view class="cj">
                        <view>分数</view>
                    </view>
                </view>
            </view>
            <view class="weui-cells weui-cells_after-title">
                <view class="weui-cell" wx:for="{{examRank}}" wx:key="{{user_id}}">
                    <view class="mc">
                        <view>{{item.rank}}</view>
                    </view>
                    <view class="weui-flex__item">
                        <view>{{item.user_name}}</view>
                    </view>
                    <view class="time">
                        <view>{{item.time}}秒</view>
                    </view>
                    <view class="cj">
                        <view>{{item.score}}</view>
                    </view>
                </view>
            </view>
        </block>

        <block wx:elif="{{view == '31'}}">
            <view class="weui-cells__title">选择需查看排名的分类</view>
            <view class="weui-panel weui-panel_access">
                <view class="weui-panel__bd">
                    <view wx:for="{{phbSubList}}" wx:key="{{id_}}" class="weui-media-box weui-media-box_text" bindtap="bindUserFlpm" data-eid="{{item.ID_}}">
                        <view class="weui-media-box__title weui-media-box__title_in-text">{{item.TKMC}}</view>
                    </view>
                </view>
            </view>
        </block>
        <block wx:if="{{view == '32'}}">
            <template is="selfInfo" data="{{...userScoreRank}}" />
            <template is="rankList" data="{{scoreRank}}" />
        </block>
    </view>
</view>